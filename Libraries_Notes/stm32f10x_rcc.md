# stm32f10x_rcc.h 정리

## 역할 (한 줄 요약)
`stm32f10x_rcc.h`는 **STM32F10x MCU의 클럭 시스템(RCC: Reset and Clock Control)을 설정·제어하기 위한 인터페이스를 정의한 헤더**이다.

---

## 왜 중요한가
STM32에서 **클럭은 모든 동작의 출발점**이다.

- CPU 동작 속도
- 타이머 주기
- UART Baud Rate
- SPI/I2C 클럭
- ADC 샘플링 속도

이 모든 것이 **RCC 설정에 의해 결정**된다.  
즉, RCC 설정이 잘못되면 *코드는 맞는데 동작이 이상한* 상황이 발생한다.

---

## 이 파일을 언제 보게 되는가
- 시스템 초기화 코드(`SystemInit`, `main` 초반)
- 새로운 주변장치(GPIO, USART, TIM 등)를 사용할 때
- 클럭 소스를 HSI ↔ HSE ↔ PLL로 변경할 때
- 저전력/클럭 분기 설정을 이해해야 할 때

---

## 핵심 구성 요소

### 1) 클럭 소스 정의
- HSI (내부 고속 오실레이터)
- HSE (외부 크리스탈)
- PLL (클럭 배율기)

→ 어떤 클럭을 기준으로 시스템을 동작시킬지 결정

---

### 2) 버스 클럭(AHB / APB) 관련 정의
- AHB (CPU, DMA 등)
- APB1 / APB2 (주변장치 버스)

각 주변장치는 **어느 버스에 연결돼 있는지**가 중요하며,  
RCC에서 해당 버스 클럭을 켜야만 주변장치가 동작한다.

---

### 3) 주변장치 클럭 Enable/Disable
- GPIO, USART, TIM, ADC 등은
- **RCC에서 클럭을 공급해주지 않으면 절대 동작하지 않는다**

실습에서 가장 흔한 실수:
> “GPIO 설정 코드는 썼는데 LED가 안 켜진다”  
→ RCC에서 GPIO 클럭을 안 켰음

---

### 4) Reset 제어
- 특정 주변장치를 **소프트웨어적으로 리셋**
- 초기 상태로 되돌리고 싶을 때 사용

---

## 예시 (의사 코드 수준)

```c
// GPIOA 클럭 활성화
RCC_Enable(GPIOA);

// 시스템 클럭을 PLL 기반으로 설정
RCC_SetSysClock(PLL);

// APB2에 연결된 주변장치 클럭 활성화
RCC_Enable(APB2, USART1);
```
> 실제 구현은 매크로/레지스터 접근 형태지만, <\br>
> 개념적으로는 "어떤 클럭을 누구에게 공급하느냐"의 문제다.
